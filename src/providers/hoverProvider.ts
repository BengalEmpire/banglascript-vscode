// Enhanced Hover Provider for BanglaScript
import * as vscode from 'vscode';
import { KEYWORDS } from '../../themes/Keywords';

// Extended keyword information with examples and descriptions
interface KeywordDetails {
    javascript: string;
    category: string;
    description: string;
    example?: string;
    tip?: string;
}

// Comprehensive keyword database with Bengali descriptions
const KEYWORD_DETAILS: { [key: string]: KeywordDetails } = {
    // Variables
    'ржзрзНрж░рзБржмржХ': { javascript: 'const', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'рж╕рзНржерж┐рж░ ржорж╛ржи ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ ржпрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛', example: 'ржзрзНрж░рзБржмржХ PI = рзй.рззрзкрззрзлрзп;', tip: 'ржпрзЗ ржорж╛ржи ржкрж░рж┐ржмрж░рзНрждржи рж╣ржмрзЗ ржирж╛ рждрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'ржЪрж▓ржХ': { javascript: 'let', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржп ржорж╛ржи ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ', example: 'ржЪрж▓ржХ ржЧржгржирж╛ = рзж;', tip: 'ржмрзНрж▓ржХ рж╕рзНржХрзЛржкржб ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓' },
    'рж╕ржВржЦрзНржпрж╛': { javascript: 'let', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'рж╕ржВржЦрзНржпрж╛ ржЯрж╛ржЗржкрзЗрж░ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ', example: 'рж╕ржВржЦрзНржпрж╛ ржмржпрж╝рж╕ = рзирзл;', tip: 'рж╕ржВржЦрзНржпрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'рж╢ржмрзНржж': { javascript: 'let', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'рж╕рзНржЯрзНрж░рж┐ржВ ржЯрж╛ржЗржкрзЗрж░ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ', example: 'рж╢ржмрзНржж ржирж╛ржо = "рж░рж╣рж┐ржо";', tip: 'ржЯрзЗржХрзНрж╕ржЯ ржПрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'ржмрж╛ржХрзНржп': { javascript: 'let', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'рж╕рзНржЯрзНрж░рж┐ржВ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ', example: 'ржмрж╛ржХрзНржп ржмрж╛рж░рзНрждрж╛ = "рж╣рзНржпрж╛рж▓рзЛ ржмрж┐рж╢рзНржм";', tip: 'ржмржбрж╝ ржЯрзЗржХрзНрж╕ржЯ ржПрж░ ржЬржирзНржп' },
    'ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓': { javascript: 'var', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'ржкрзБрж░рж╛рждржи рж╕рзНржЯрж╛ржЗрж▓ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ (var)', example: 'ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ x = рззрзж;', tip: 'тЪая╕П let ржмрж╛ const ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'ржмрзНржпрж╛ржХрзНрждрж┐': { javascript: 'const', category: 'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓', description: 'рж╕рзНржерж┐рж░ ржорж╛ржи/ржЕржмржЬрзЗржХрзНржЯ ржШрзЛрж╖ржгрж╛ ржХрж░рзЗ', example: 'ржмрзНржпрж╛ржХрзНрждрж┐ ржЫрж╛рждрзНрж░ = "ржХрж░рж┐ржо";', tip: 'const ржПрж░ рж╕ржорждрзБрж▓рзНржп' },

    // Functions
    'ржЕржирзБрж╖рзНржарж╛ржи': { javascript: 'function', category: 'ржлрж╛ржВрж╢ржи', description: 'ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ', example: 'ржЕржирзБрж╖рзНржарж╛ржи ржпрзЛржЧ(ржХ, ржЦ) {\n    ржкрзНрж░рзЗрж░ржг ржХ + ржЦ;\n}', tip: 'ржкрзБржиржГржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп ржХрзЛржб ржмрзНрж▓ржХ' },
    'ржлрж╛ржВрж╢ржи': { javascript: 'function', category: 'ржлрж╛ржВрж╢ржи', description: 'ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ', example: 'ржлрж╛ржВрж╢ржи ржмрж░рзНржЧ(n) {\n    ржкрзНрж░рзЗрж░ржг n * n;\n}', tip: 'ржЕржирзБрж╖рзНржарж╛ржи ржПрж░ рж╕ржорждрзБрж▓рзНржп' },
    'ржкрзНрж░рзЗрж░ржг': { javascript: 'return', category: 'ржлрж╛ржВрж╢ржи', description: 'ржлрж╛ржВрж╢ржи ржерзЗржХрзЗ ржорж╛ржи ржлрзЗрж░ржд ржжрзЗржпрж╝', example: 'ржкрзНрж░рзЗрж░ржг ржлрж▓рж╛ржлрж▓;', tip: 'ржлрж╛ржВрж╢ржи ржПржЦрж╛ржирзЗ ржерзЗржорзЗ ржпрж╛ржпрж╝' },
    'ржлрзЗрж░ржд': { javascript: 'return', category: 'ржлрж╛ржВрж╢ржи', description: 'ржлрж╛ржВрж╢ржи ржерзЗржХрзЗ ржорж╛ржи ржлрзЗрж░ржд ржжрзЗржпрж╝', example: 'ржлрзЗрж░ржд ржорж╛ржи;', tip: 'ржкрзНрж░рзЗрж░ржг ржПрж░ рж╕ржорждрзБрж▓рзНржп' },

    // Conditionals
    'ржпржжрж┐': { javascript: 'if', category: 'рж╢рж░рзНржд', description: 'рж╢рж░рзНржд рж╕рждрзНржп рж╣рж▓рзЗ ржмрзНрж▓ржХ ржЪрж╛рж▓рж╛ржпрж╝', example: 'ржпржжрж┐ (рж╕ржВржЦрзНржпрж╛ > рззрзж) {\n    рж▓рж┐ржЦрзЛ("ржмржбрж╝");\n}', tip: 'рж╢рж░рзНрждржорзВрж▓ржХ ржмрж┐ржмрзГрждрж┐' },
    'ржирж╛рж╣рж▓рзЗ': { javascript: 'else', category: 'рж╢рж░рзНржд', description: 'ржпржжрж┐ рж╢рж░рзНржд ржорж┐ржерзНржпрж╛ рж╣ржпрж╝ рждрж╛рж╣рж▓рзЗ ржЪрж╛рж▓рж╛ржпрж╝', example: 'ржирж╛рж╣рж▓рзЗ {\n    рж▓рж┐ржЦрзЛ("ржЫрзЛржЯ");\n}', tip: 'if ржмрзНрж▓ржХрзЗрж░ ржкрж░рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'рж╕рзБржЗржЪ': { javascript: 'switch', category: 'рж╢рж░рзНржд', description: 'ржПржХрж╛ржзрж┐ржХ ржХрзЗрж╕ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзЗ', example: 'рж╕рзБржЗржЪ (ржжрж┐ржи) {\n    ржХрзЗрж╕ рзз: ...\n}', tip: 'ржЕржирзЗржХ if-else ржПрж░ ржмрж┐ржХрж▓рзНржк' },
    'ржХрзЗрж╕': { javascript: 'case', category: 'рж╢рж░рзНржд', description: 'рж╕рзБржЗржЪ ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржХрзЗрж╕', example: 'ржХрзЗрж╕ рзз:\n    рж▓рж┐ржЦрзЛ("ржПржХ");\n    ржерж╛ржорж╛ржУ;', tip: 'ржерж╛ржорж╛ржУ ржжрж┐рждрзЗ ржнрзБрж▓ржмрзЗржи ржирж╛' },
    'рж╕рж╛ржзрж╛рж░ржг': { javascript: 'default', category: 'рж╢рж░рзНржд', description: 'ржХрзЛржирзЛ ржХрзЗрж╕ ржирж╛ ржорж┐рж▓рж▓рзЗ ржЪрж╛рж▓рж╛ржпрж╝', example: 'рж╕рж╛ржзрж╛рж░ржг:\n    рж▓рж┐ржЦрзЛ("ржЕржирзНржпрж╛ржирзНржп");', tip: 'ржбрж┐ржлрж▓рзНржЯ ржХрзЗрж╕' },

    // Loops
    'ржЬржирзНржп': { javascript: 'for', category: 'рж▓рзБржк', description: 'ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХржмрж╛рж░ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ', example: 'ржЬржирзНржп (рж╕ржВржЦрзНржпрж╛ i = рзж; i < рзл; i++) {\n    рж▓рж┐ржЦрзЛ(i);\n}', tip: 'ржпржЦржи ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ рж╕ржВржЦрзНржпрж╛ ржЬрж╛ржирж╛ ржерж╛ржХрзЗ' },
    'ржпржЦржи': { javascript: 'while', category: 'рж▓рзБржк', description: 'рж╢рж░рзНржд рж╕рждрзНржп ржерж╛ржХрж╛ ржкрж░рзНржпржирзНржд ржЪрж▓рзЗ', example: 'ржпржЦржи (i < рззрзж) {\n    i++;\n}', tip: 'рж╢рж░рзНржд ржнрж┐рждрзНрждрж┐ржХ рж▓рзБржк' },
    'ржХрж░рзЛ': { javascript: 'do', category: 'рж▓рзБржк', description: 'ржХржоржкржХрзНрж╖рзЗ ржПржХржмрж╛рж░ ржЪрж▓рзЗ', example: 'ржХрж░рзЛ {\n    ржХрзЛржб\n} ржпржЦржи (рж╢рж░рзНржд);', tip: 'ржкрзНрж░ржержорзЗ ржЪрж╛рж▓рж╛ржпрж╝, рждрж╛рж░ржкрж░ рж╢рж░рзНржд ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзЗ' },
    'ржерж╛ржорж╛ржУ': { javascript: 'break', category: 'рж▓рзБржк', description: 'рж▓рзБржк ржерзЗржХрзЗ ржмрзЗрж░ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝', example: 'ржпржжрж┐ (ржкрж╛ржУржпрж╝рж╛) ржерж╛ржорж╛ржУ;', tip: 'рж▓рзБржк ржмржирзНржз ржХрж░рзЗ' },
    'ржЪрж╛рж▓рж┐ржпрж╝рзЗ_ржпрж╛ржУ': { javascript: 'continue', category: 'рж▓рзБржк', description: 'ржмрж░рзНрждржорж╛ржи ржЗржЯрж╛рж░рзЗрж╢ржи рж╕рзНржХрж┐ржк ржХрж░рзЗ', example: 'ржпржжрж┐ (рж╕рзНржХрж┐ржк) ржЪрж╛рж▓рж┐ржпрж╝рзЗ_ржпрж╛ржУ;', tip: 'ржкрж░ржмрж░рзНрждрзА ржЗржЯрж╛рж░рзЗрж╢ржирзЗ ржпрж╛ржпрж╝' },

    // Classes
    'ржХрзНрж▓рж╛рж╕': { javascript: 'class', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржПржХржЯрж┐ ржирждрзБржи ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рзЗ', example: 'ржХрзНрж▓рж╛рж╕ ржорж╛ржирзБрж╖ {\n    ржирж┐рж░рзНржорж╛рждрж╛(ржирж╛ржо) {\n        ржПржЗ.ржирж╛ржо = ржирж╛ржо;\n    }\n}', tip: 'OOP ржПрж░ ржЬржирзНржп' },
    'рж╢рзНрж░рзЗржгрзА': { javascript: 'class', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржПржХржЯрж┐ ржирждрзБржи ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рзЗ', example: 'рж╢рзНрж░рзЗржгрзА ржкрзНрж░рж╛ржгрзА { }', tip: 'ржХрзНрж▓рж╛рж╕ ржПрж░ рж╕ржорждрзБрж▓рзНржп' },
    'ржирж┐рж░рзНржорж╛рждрж╛': { javascript: 'constructor', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржХрзНрж▓рж╛рж╕рзЗрж░ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░ ржорзЗржержб', example: 'ржирж┐рж░рзНржорж╛рждрж╛(ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░) { }', tip: 'ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ рж╣рж▓рзЗ ржЪрж▓рзЗ' },
    'ржЧржаржи': { javascript: 'constructor', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржХрзНрж▓рж╛рж╕рзЗрж░ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░', example: 'ржЧржаржи(ржирж╛ржо) {\n    ржПржЯрж┐.ржирж╛ржо = ржирж╛ржо;\n}', tip: 'ржирж┐рж░рзНржорж╛рждрж╛ ржПрж░ рж╕ржорждрзБрж▓рзНржп' },
    'ржмрж┐рж╕рзНрждрзГржд': { javascript: 'extends', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржЕржирзНржп ржХрзНрж▓рж╛рж╕ ржерзЗржХрзЗ ржЗржирж╣рзЗрж░рж┐ржЯ ржХрж░рзЗ', example: 'ржХрзНрж▓рж╛рж╕ ржХрзБржХрзБрж░ ржмрж┐рж╕рзНрждрзГржд ржкрзНрж░рж╛ржгрзА { }', tip: 'ржЗржирж╣рзЗрж░рж┐ржЯрзЗржирзНрж╕' },
    'ржирждрзБржи': { javascript: 'new', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ', example: 'ржзрзНрж░рзБржмржХ obj = ржирждрзБржи ржХрзНрж▓рж╛рж╕();', tip: 'ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рждрзИрж░рж┐' },
    'ржПржЗ': { javascript: 'this', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржмрж░рзНрждржорж╛ржи ржЕржмржЬрзЗржХрзНржЯ рж░рзЗржлрж╛рж░рзЗржирзНрж╕', example: 'ржПржЗ.ржирж╛ржо = ржирж╛ржо;', tip: 'ржмрж░рзНрждржорж╛ржи ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕' },
    'ржПржЯрж┐': { javascript: 'this', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржмрж░рзНрждржорж╛ржи ржЕржмржЬрзЗржХрзНржЯ рж░рзЗржлрж╛рж░рзЗржирзНрж╕', example: 'ржПржЯрж┐.ржорж╛ржи = ржорж╛ржи;', tip: 'ржПржЗ ржПрж░ рж╕ржорждрзБрж▓рзНржп' },
    'рж╕рзБржкрж╛рж░': { javascript: 'super', category: 'ржХрзНрж▓рж╛рж╕', description: 'ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХрзНрж▓рж╛рж╕ ржХрж▓ ржХрж░рзЗ', example: 'рж╕рзБржкрж╛рж░(ржирж╛ржо);', tip: 'ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХржирж╕рзНржЯрзНрж░рж╛ржХрзНржЯрж░' },
    'рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ': { javascript: 'static', category: 'ржХрзНрж▓рж╛рж╕', description: 'рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржорзЗржержб/ржкрзНрж░ржкрж╛рж░рзНржЯрж┐', example: 'рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржЧржгржирж╛() { }', tip: 'ржХрзНрж▓рж╛рж╕ рж▓рзЗржнрзЗрж▓ ржорзЗржержб' },

    // Async
    'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ': { javascript: 'async', category: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ', description: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ', example: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ ржЕржирзБрж╖рзНржарж╛ржи ржбрж╛ржЯрж╛_ржЖржирзЛ() { }', tip: 'Promise рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ' },
    'ржЕржкрзЗржХрзНрж╖рж╛': { javascript: 'await', category: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ', description: 'Promise рж╕ржорзНржкржирзНржи рж╣ржУржпрж╝рж╛рж░ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ', example: 'ржзрзНрж░рзБржмржХ ржбрж╛ржЯрж╛ = ржЕржкрзЗржХрзНрж╖рж╛ fetch(url);', tip: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ ржлрж╛ржВрж╢ржирзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'ржкрзНрж░ржорж┐ржЬ': { javascript: 'Promise', category: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ', description: 'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп Promise', example: 'ржирждрзБржи Promise((resolve) => { })', tip: 'ржнржмрж┐рж╖рзНржпрждрзЗ ржорж╛ржи ржкрж╛ржУржпрж╝рж╛рж░ ржкрзНрж░рждрж┐рж╢рзНрж░рзБрждрж┐' },

    // Error Handling
    'ржЪрзЗрж╖рзНржЯрж╛': { javascript: 'try', category: 'рждрзНрж░рзБржЯрж┐', description: 'рждрзНрж░рзБржЯрж┐ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ рж╢рзБрж░рзБ ржХрж░рзЗ', example: 'ржЪрзЗрж╖рзНржЯрж╛ {\n    ржЭрзБржБржХрж┐ржкрзВрж░рзНржг_ржХрзЛржб();\n}', tip: 'ржзрж░рзЛ ржПрж░ рж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи' },
    'ржзрж░рзЛ': { javascript: 'catch', category: 'рждрзНрж░рзБржЯрж┐', description: 'рждрзНрж░рзБржЯрж┐ ржзрж░рзЗ ржПржмржВ рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рзЗ', example: 'ржзрж░рзЛ (рждрзНрж░рзБржЯрж┐) {\n    рж▓рж┐ржЦрзЛ(рждрзНрж░рзБржЯрж┐);\n}', tip: 'рждрзНрж░рзБржЯрж┐ ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржпрж╝' },
    'ржЕржмрж╢рзЗрж╖рзЗ': { javascript: 'finally', category: 'рждрзНрж░рзБржЯрж┐', description: 'рж╕ржмрж╕ржоржпрж╝ ржЪрж▓рзЗ, рждрзНрж░рзБржЯрж┐ рж╣рзЛржХ ржмрж╛ ржирж╛ рж╣рзЛржХ', example: 'ржЕржмрж╢рзЗрж╖рзЗ {\n    ржкрж░рж┐рж╖рзНржХрж╛рж░();\n}', tip: 'ржХрзНрж▓рж┐ржиржЖржк ржХрзЛржб' },
    'ржЫрзБржбрж╝рзЗ_ржжрж╛ржУ': { javascript: 'throw', category: 'рждрзНрж░рзБржЯрж┐', description: 'рждрзНрж░рзБржЯрж┐ ржирж┐ржХрзНрж╖рзЗржк ржХрж░рзЗ', example: 'ржЫрзБржбрж╝рзЗ_ржжрж╛ржУ ржирждрзБржи Error("рж╕ржорж╕рзНржпрж╛!");', tip: 'ржХрж╛рж╕рзНржЯржо рждрзНрж░рзБржЯрж┐ рждрзИрж░рж┐' },

    // Modules
    'ржЖржоржжрж╛ржирж┐': { javascript: 'import', category: 'ржоржбрж┐ржЙрж▓', description: 'ржЕржирзНржп ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржоржбрж┐ржЙрж▓ ржЖржирзЗ', example: 'ржЖржоржжрж╛ржирж┐ { ржпрзЛржЧ } ржерзЗржХрзЗ "./utils";', tip: 'ES ржоржбрж┐ржЙрж▓ ржЗржоржкрзЛрж░рзНржЯ' },
    'рж░ржкрзНрждрж╛ржирж┐': { javascript: 'export', category: 'ржоржбрж┐ржЙрж▓', description: 'ржоржбрж┐ржЙрж▓ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржХрж░рзЗ', example: 'рж░ржкрзНрждрж╛ржирж┐ ржЕржирзБрж╖рзНржарж╛ржи ржпрзЛржЧ() { }', tip: 'ржЕржирзНржп ржлрж╛ржЗрж▓рзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп' },
    'ржерзЗржХрзЗ': { javascript: 'from', category: 'ржоржбрж┐ржЙрж▓', description: 'ржоржбрж┐ржЙрж▓рзЗрж░ ржЙрзОрж╕ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ', example: 'ржЖржоржжрж╛ржирж┐ X ржерзЗржХрзЗ "./file";', tip: 'ржлрж╛ржЗрж▓ ржкрж╛рже' },

    // Console
    'рж▓рж┐ржЦрзЛ': { javascript: 'console.log', category: 'ржХржирж╕рзЛрж▓', description: 'ржХржирж╕рзЛрж▓рзЗ ржЖржЙржЯржкрзБржЯ ржжрзЗржЦрж╛ржпрж╝', example: 'рж▓рж┐ржЦрзЛ("рж╣рзНржпрж╛рж▓рзЛ ржмрж┐рж╢рзНржм!");', tip: 'ржбрж┐ржмрж╛ржЧрж┐ржВ ржПрж░ ржЬржирзНржп' },
    'рждрзНрж░рзБржЯрж┐_рж▓рж┐ржЦрзЛ': { javascript: 'console.error', category: 'ржХржирж╕рзЛрж▓', description: 'рждрзНрж░рзБржЯрж┐ ржмрж╛рж░рзНрждрж╛ ржжрзЗржЦрж╛ржпрж╝', example: 'рждрзНрж░рзБржЯрж┐_рж▓рж┐ржЦрзЛ("рж╕ржорж╕рзНржпрж╛!");', tip: 'рж▓рж╛рж▓ рж░ржЩрзЗ ржжрзЗржЦрж╛ржпрж╝' },
    'рж▓рж┐ржЦрзЛ_рж╕рждрж░рзНржХрждрж╛': { javascript: 'console.warn', category: 'ржХржирж╕рзЛрж▓', description: 'рж╕рждрж░рзНржХрждрж╛ ржмрж╛рж░рзНрждрж╛ ржжрзЗржЦрж╛ржпрж╝', example: 'рж▓рж┐ржЦрзЛ_рж╕рждрж░рзНржХрждрж╛("рж╕рждрж░рзНржХ!");', tip: 'рж╣рж▓рзБржж рж░ржЩрзЗ ржжрзЗржЦрж╛ржпрж╝' },
    'ржкрж░рж┐рж╖рзНржХрж╛рж░_ржХрж░рзЛ': { javascript: 'console.clear', category: 'ржХржирж╕рзЛрж▓', description: 'ржХржирж╕рзЛрж▓ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рзЗ', example: 'ржкрж░рж┐рж╖рзНржХрж╛рж░_ржХрж░рзЛ();', tip: 'ржХржирж╕рзЛрж▓ ржХрзНрж▓рж┐ржпрж╝рж╛рж░' },

    // Values
    'рж╕рждрзНржп': { javascript: 'true', category: 'ржорж╛ржи', description: 'ржмрзБрж▓рж┐ржпрж╝рж╛ржи рж╕рждрзНржп ржорж╛ржи', example: 'ржзрзНрж░рзБржмржХ рж╕ржХрзНрж░рж┐ржпрж╝ = рж╕рждрзНржп;', tip: 'Boolean true' },
    'ржорж┐ржерзНржпрж╛': { javascript: 'false', category: 'ржорж╛ржи', description: 'ржмрзБрж▓рж┐ржпрж╝рж╛ржи ржорж┐ржерзНржпрж╛ ржорж╛ржи', example: 'ржзрзНрж░рзБржмржХ ржмржирзНржз = ржорж┐ржерзНржпрж╛;', tip: 'Boolean false' },
    'рж╢рзВржирзНржп': { javascript: 'null', category: 'ржорж╛ржи', description: 'рж╢рзВржирзНржп/null ржорж╛ржи', example: 'ржзрзНрж░рзБржмржХ x = рж╢рзВржирзНржп;', tip: 'ржХрзЛржирзЛ ржорж╛ржи ржирзЗржЗ' },
    'ржЕржирж┐рж░рзНржзрж╛рж░рж┐ржд': { javascript: 'undefined', category: 'ржорж╛ржи', description: 'ржЕржирж┐рж░рзНржзрж╛рж░рж┐ржд ржорж╛ржи', example: 'ржЪрж▓ржХ y; // ржЕржирж┐рж░рзНржзрж╛рж░рж┐ржд', tip: 'ржорж╛ржи рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝ржирж┐' },

    // DOM
    'ржжрж╕рзНрждрж╛ржмрзЗржЬ': { javascript: 'document', category: 'DOM', description: 'HTML ржбржХрзБржорзЗржирзНржЯ ржЕржмржЬрзЗржХрзНржЯ', example: 'ржжрж╕рзНрждрж╛ржмрзЗржЬ.ржЖржЗржбрж┐_ржжрзНржмрж╛рж░рж╛_ржкрж╛ржУ("id");', tip: 'ржУржпрж╝рзЗржм ржкрзЗржЬ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕' },
    'ржЖржЗржбрж┐_ржжрзНржмрж╛рж░рж╛_ржкрж╛ржУ': { javascript: 'getElementById', category: 'DOM', description: 'ID ржжрж┐ржпрж╝рзЗ ржПрж▓рж┐ржорзЗржирзНржЯ ржкрж╛ржпрж╝', example: 'ржжрж╕рзНрждрж╛ржмрзЗржЬ.ржЖржЗржбрж┐_ржжрзНржмрж╛рж░рж╛_ржкрж╛ржУ("btn");', tip: 'ржПржХржЯрж┐ ржПрж▓рж┐ржорзЗржирзНржЯ' },
    'рж╕рж┐рж▓рзЗржХрзНржЯрж░_ржжрзНржмрж╛рж░рж╛_ржкрж╛ржУ': { javascript: 'querySelector', category: 'DOM', description: 'CSS рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржжрж┐ржпрж╝рзЗ ржПрж▓рж┐ржорзЗржирзНржЯ ржкрж╛ржпрж╝', example: 'ржжрж╕рзНрждрж╛ржмрзЗржЬ.рж╕рж┐рж▓рзЗржХрзНржЯрж░_ржжрзНржмрж╛рж░рж╛_ржкрж╛ржУ(".class");', tip: 'ржкрзНрж░ржержо ржорзНржпрж╛ржЪ' },
    'ржЗржнрзЗржирзНржЯ_ржпрзЛржЧ_ржХрж░рзЛ': { javascript: 'addEventListener', category: 'DOM', description: 'ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ ржпрзЛржЧ ржХрж░рзЗ', example: 'btn.ржЗржнрзЗржирзНржЯ_ржпрзЛржЧ_ржХрж░рзЛ("click", fn);', tip: 'ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ' },

    // Array Methods
    'ржарзЗрж▓рзЛ': { javascript: 'push', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржЕрзНржпрж╛рж░рзЗрж░ рж╢рзЗрж╖рзЗ ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░рзЗ', example: 'ржЕрзНржпрж╛рж░рзЗ.ржарзЗрж▓рзЛ("ржирждрзБржи");', tip: 'рж╢рзЗрж╖рзЗ ржпрзЛржЧ' },
    'рждрзЛрж▓рж╛': { javascript: 'pop', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржЕрзНржпрж╛рж░рзЗрж░ рж╢рзЗрж╖ ржЖржЗржЯрзЗржо ржмрзЗрж░ ржХрж░рзЗ', example: 'ржзрзНрж░рзБржмржХ рж╢рзЗрж╖ = ржЕрзНржпрж╛рж░рзЗ.рждрзЛрж▓рж╛();', tip: 'рж╢рзЗрж╖ ржерзЗржХрзЗ ржмрзЗрж░' },
    'ржкрзНрж░рждрж┐ржЯрж┐рждрзЗ': { javascript: 'forEach', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗ ржлрж╛ржВрж╢ржи ржЪрж╛рж▓рж╛ржпрж╝', example: 'ржЕрзНржпрж╛рж░рзЗ.ржкрзНрж░рждрж┐ржЯрж┐рждрзЗ(fn);', tip: 'рж▓рзБржк ржПрж░ ржмрж┐ржХрж▓рзНржк' },
    'ржорзНржпрж╛ржк': { javascript: 'map', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржо рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ', example: 'ржЕрзНржпрж╛рж░рзЗ.ржорзНржпрж╛ржк(x => x * 2);', tip: 'ржирждрзБржи ржЕрзНржпрж╛рж░рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ' },
    'ржлрж┐рж▓рзНржЯрж╛рж░': { javascript: 'filter', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'рж╢рж░рзНржд ржЕржирзБржпрж╛ржпрж╝рзА ржЖржЗржЯрзЗржо ржмрж╛ржЫрж╛ржЗ ржХрж░рзЗ', example: 'ржЕрзНржпрж╛рж░рзЗ.ржлрж┐рж▓рзНржЯрж╛рж░(x => x > 5);', tip: 'ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржЕрзНржпрж╛рж░рзЗ' },
    'ржЦрзБржБржЬрзЗ': { javascript: 'find', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржкрзНрж░ржержо ржорзНржпрж╛ржЪрж┐ржВ ржЖржЗржЯрзЗржо ржЦрзЛржБржЬрзЗ', example: 'ржЕрзНржпрж╛рж░рзЗ.ржЦрзБржБржЬрзЗ(x => x.id === 1);', tip: 'ржПржХржЯрж┐ ржЖржЗржЯрзЗржо рж░рж┐ржЯрж╛рж░рзНржи' },
    'рж╣рзНрж░рж╛рж╕': { javascript: 'reduce', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржЕрзНржпрж╛рж░рзЗржХрзЗ ржПржХржЯрж┐ ржорж╛ржирзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ', example: 'ржЕрзНржпрж╛рж░рзЗ.рж╣рзНрж░рж╛рж╕((a, b) => a + b, 0);', tip: 'ржпрзЛржЧржлрж▓, ржЧржбрж╝ ржЗрждрзНржпрж╛ржжрж┐' },
    'ржжрзИрж░рзНржШрзНржп': { javascript: 'length', category: 'ржЕрзНржпрж╛рж░рзЗ', description: 'ржЕрзНржпрж╛рж░рзЗ ржмрж╛ рж╕рзНржЯрзНрж░рж┐ржВ ржПрж░ ржжрзИрж░рзНржШрзНржп', example: 'ржЕрзНржпрж╛рж░рзЗ.ржжрзИрж░рзНржШрзНржп;', tip: 'ржЖржЗржЯрзЗржо/ржЕржХрзНрж╖рж░ рж╕ржВржЦрзНржпрж╛' },

    // Math
    'ржЧржгрж┐ржд': { javascript: 'Math', category: 'ржЧржгрж┐ржд', description: 'ржЧрж╛ржгрж┐рждрж┐ржХ ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржЕржмржЬрзЗржХрзНржЯ', example: 'ржЧржгрж┐ржд.ржмрж░рзНржЧржорзВрж▓(16);', tip: 'ржорзНржпрж╛рже ржлрж╛ржВрж╢ржи' },
    'ржПрж▓рзЛржорзЗрж▓рзЛ_рж╕ржВржЦрзНржпрж╛': { javascript: 'Math.random', category: 'ржЧржгрж┐ржд', description: '0 ржерзЗржХрзЗ 1 ржПрж░ ржоржзрзНржпрзЗ рж░тАНрзНржпрж╛ржирзНржбржо рж╕ржВржЦрзНржпрж╛', example: 'ржПрж▓рзЛржорзЗрж▓рзЛ_рж╕ржВржЦрзНржпрж╛();', tip: 'рж░тАНрзНржпрж╛ржирзНржбржо ржЬрзЗржирж╛рж░рзЗржЯрж░' },
    'ржмрж░рзНржЧржорзВрж▓': { javascript: 'Math.sqrt', category: 'ржЧржгрж┐ржд', description: 'рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧржорзВрж▓', example: 'ржЧржгрж┐ржд.ржмрж░рзНржЧржорзВрж▓(25); // 5', tip: 'рж╕рзНржХржпрж╝рж╛рж░ рж░рзБржЯ' },

    // Operators
    'ржзрж░ржи': { javascript: 'typeof', category: 'ржЕржкрж╛рж░рзЗржЯрж░', description: 'ржорж╛ржирзЗрж░ ржЯрж╛ржЗржк ржмрзЗрж░ ржХрж░рзЗ', example: 'ржзрж░ржи рж╕ржВржЦрзНржпрж╛; // "number"', tip: 'ржЯрж╛ржЗржк ржЪрзЗржХ' },
    'ржорзБржЫрзЛ': { javascript: 'delete', category: 'ржЕржкрж╛рж░рзЗржЯрж░', description: 'ржЕржмржЬрзЗржХрзНржЯ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржорзБржЫрзЗ ржжрзЗржпрж╝', example: 'ржорзБржЫрзЛ obj.prop;', tip: 'ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржбрж┐рж▓рж┐ржЯ' },
};

// Get category emoji
function getCategoryEmoji(category: string): string {
    const emojis: { [key: string]: string } = {
        'ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓': 'ЁЯУж',
        'ржлрж╛ржВрж╢ржи': 'тЪб',
        'рж╢рж░рзНржд': 'ЁЯФА',
        'рж▓рзБржк': 'ЁЯФБ',
        'ржХрзНрж▓рж╛рж╕': 'ЁЯПЧя╕П',
        'ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ': 'тП│',
        'рждрзНрж░рзБржЯрж┐': 'тЪая╕П',
        'ржоржбрж┐ржЙрж▓': 'ЁЯУж',
        'рж▓рж┐ржЦрзЛ': 'ЁЯЦея╕П',
        'ржорж╛ржи': 'ЁЯТО',
        'DOM': 'ЁЯМР',
        'ржЕрзНржпрж╛рж░рзЗ': 'ЁЯУЭ',
        'ржЧржгрж┐ржд': 'ЁЯФв',
        'ржЕржкрж╛рж░рзЗржЯрж░': 'ЁЯФз',
    };
    return emojis[category] || 'ЁЯУМ';
}

export function createHoverProvider(): vscode.HoverProvider {
    return {
        provideHover(document, position, token) {
            const range = document.getWordRangeAtPosition(position, /[\p{L}\p{N}_$]+/u);
            if (!range) return undefined;

            const word = document.getText(range);

            // Check if word is in our detailed database
            const details = KEYWORD_DETAILS[word];
            if (details) {
                const markdown = new vscode.MarkdownString();
                markdown.isTrusted = true;
                markdown.supportHtml = true;

                const emoji = getCategoryEmoji(details.category);

                markdown.appendMarkdown(`## ${emoji} \`${word}\` тЖТ \`${details.javascript}\`\n\n`);
                markdown.appendMarkdown(`**ржмрж┐ржнрж╛ржЧ:** ${details.category}\n\n`);
                markdown.appendMarkdown(`${details.description}\n\n`);

                if (details.example) {
                    markdown.appendMarkdown(`**ржЙржжрж╛рж╣рж░ржг:**\n\`\`\`banglascript\n${details.example}\n\`\`\`\n\n`);
                }

                if (details.tip) {
                    markdown.appendMarkdown(`ЁЯТб **ржЯрж┐ржк:** ${details.tip}\n`);
                }

                return new vscode.Hover(markdown, range);
            }

            // Fallback to basic keyword lookup
            const jsEquivalent = KEYWORDS[word as keyof typeof KEYWORDS];
            if (jsEquivalent) {
                const markdown = new vscode.MarkdownString();
                markdown.appendMarkdown(`**${word}** тЖТ \`${jsEquivalent}\`\n\nJavaScript рж╕ржорждрзБрж▓рзНржп`);
                return new vscode.Hover(markdown, range);
            }

            return undefined;
        }
    };
}